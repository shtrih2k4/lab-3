#include<iostream>
#include<vector>
#include<algorithm>
using namespace std;
unsigned int i = 0;
struct Node {
	Node* left;
	Node* right;
	int val;
	Node(int val) {
		this->val = val;
		left = right = NULL;
	}
};
Node* root = NULL;
Node* tree = NULL;
void push_to_tree(Node** t, int val) {
	if (root == NULL) {
		root = new Node(val);
		*t =root;
		return;
	}
	else {
		if (*t == NULL) {
			*t = new Node(val);
			return;
		}
		if (val > (*t)->val) {
			push_to_tree(&(*t)->right, val);
		}
		else {
			push_to_tree(&(*t)->left, val);
		}
	}
}
void sorting_by_tree(vector<int>& a,Node* t) {
	if (t == NULL or i>=a.size()) return;
	else {
		sorting_by_tree(a, t->left);
		a[i] = t->val;
		i++;
		sorting_by_tree(a,t->right);
	}
}

vector<int> temp;
Node** del_for_non_nulls(Node** t) {
	if ((*t)->left != NULL) {
		del_for_non_nulls(&(*t)->left);
	}
	else if ((*t)->left == NULL and (*t)->right != NULL) {
		return t;
	}
	else if ((*t)->left == NULL and (*t)->right == NULL) {
		return t;
	}
}
void deletion(Node** t,vector<int>&a,unsigned int pos) {
	if ((*t)->val == a[pos - 1]) {
		if ((*t)->right == NULL and (*t)->left == NULL) {
			*t=NULL;
			return;
		}
		else if ((*t)->right != NULL and (*t)->left == NULL) {
			*t = (*t)->right;
			return;
		}
		else if ((*t)->right == NULL and (*t)->left != NULL) {
			*t = (*t)->left;
			return;
		}
		else {
			(*t)->val = (*del_for_non_nulls(&(*t)->right))->val;
			*del_for_non_nulls(&(*t)->right) = NULL;
		}
		
	}
	else {
		if (a[pos - 1] > (*t)->val) {
			deletion(&(*t)->right, a, pos);
		}
		else {
			deletion(&(*t)->left, a, pos);
		}
	}
	
}

inline void push_back(vector<int>& a, int val) {
	i = 0;
	a.push_back(val);
	push_to_tree(&root, val);
	
	sorting_by_tree(a,root);
	tree = root;
};
inline void erase(vector<int>& a, unsigned int pos) {
	i = 0;
	tree = root;
	deletion(&tree, a, pos);
	root = tree;
	a.erase(a.begin() + pos - 1);
	sorting_by_tree(a,root);
	
	
};
int main() {
	vector<int> seq({ 5,7,3,6,8,2,9});
	for (unsigned int i = 0; i < seq.size(); ++i) {
		push_to_tree(&tree, seq[i]);
	}
	push_back(seq, 10);
	for (unsigned int i = 0; i < seq.size(); ++i) {
		cout << seq[i] << " ";
	}
	cout << endl;
	erase(seq, 6);
	for (unsigned int i = 0; i < seq.size(); ++i) {
		cout << seq[i] << " ";
	}
	
	return 0;
	
}
